{
  "openapi": "3.1.0",
  "info": {
    "title": "ClipFlow API",
    "description": "A FastAPI backend service for video editing that analyzes audio tracks to detect speech segments, silence, and optionally filler words.",
    "version": "v1"
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": { "type": "string", "example": "healthy" },
                    "version": { "type": "string", "example": "v1" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register",
        "description": "Register a new user.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RegisterRequest" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/TokenResponse" }
              }
            }
          },
          "400": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Login",
        "description": "Login with email and password.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/TokenResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Refresh Token",
        "description": "Refresh access token using refresh token.",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RefreshTokenRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/TokenResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Logout",
        "description": "Logout and revoke refresh token.",
        "operationId": "logout_api_v1_auth_logout_post",
        "security": [{ "HTTPBearer": [] }],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RefreshTokenRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MessageResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/auth/forgot-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Forgot Password",
        "description": "Request password reset email.",
        "operationId": "forgot_password_api_v1_auth_forgot_password_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ForgotPasswordRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MessageResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/reset-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Reset Password",
        "description": "Reset password using reset token.",
        "operationId": "reset_password_api_v1_auth_reset_password_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResetPasswordRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MessageResponse" }
              }
            }
          },
          "501": {
            "description": "Not Implemented"
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get Current User Info",
        "description": "Get current authenticated user information.",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "security": [{ "HTTPBearer": [] }],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "patch": {
        "tags": ["Authentication"],
        "summary": "Update Current User",
        "description": "Update current user profile.",
        "operationId": "update_current_user_api_v1_auth_me_patch",
        "security": [{ "HTTPBearer": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UserUpdate" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/v1/projects": {
      "get": {
        "tags": ["Projects"],
        "summary": "List Projects",
        "description": "List all projects for the current user.",
        "operationId": "list_projects_api_v1_projects_get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": { "$ref": "#/components/schemas/ProjectStatus" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProjectListResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "post": {
        "tags": ["Projects"],
        "summary": "Create Project",
        "description": "Create a new project.",
        "operationId": "create_project_api_v1_projects_post",
        "security": [{ "HTTPBearer": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProjectCreate" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProjectResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}": {
      "get": {
        "tags": ["Projects"],
        "summary": "Get Project",
        "description": "Get a project with its media files and analysis results.",
        "operationId": "get_project_api_v1_projects__project_id__get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProjectWithMediaResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Projects"],
        "summary": "Update Project",
        "description": "Update a project.",
        "operationId": "update_project_api_v1_projects__project_id__patch",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProjectUpdate" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ProjectResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        }
      },
      "delete": {
        "tags": ["Projects"],
        "summary": "Delete Project",
        "description": "Delete a project and all associated files.",
        "operationId": "delete_project_api_v1_projects__project_id__delete",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MessageResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/upload": {
      "post": {
        "tags": ["Media"],
        "summary": "Upload Media",
        "description": "Upload a media file to a project.",
        "operationId": "upload_media_api_v1_projects__project_id__upload_post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/MediaFileResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Project Not Found"
          },
          "413": {
            "description": "File Too Large"
          },
          "415": {
            "description": "Unsupported Media Type"
          }
        }
      }
    },
    "/api/v1/upload/presigned": {
      "post": {
        "tags": ["Media"],
        "summary": "Get Presigned Upload URL",
        "description": "Get a presigned URL for direct S3 upload.",
        "operationId": "get_presigned_upload_url_api_v1_upload_presigned_post",
        "security": [{ "HTTPBearer": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/PresignedUploadRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PresignedUploadResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "501": {
            "description": "Not Implemented (S3 not configured)"
          }
        }
      }
    },
    "/api/v1/upload/confirm/{file_id}": {
      "post": {
        "tags": ["Media"],
        "summary": "Confirm Upload",
        "description": "Confirm that a presigned URL upload has completed.",
        "operationId": "confirm_upload_api_v1_upload_confirm__file_id__post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UploadConfirmResponse" }
              }
            }
          },
          "501": {
            "description": "Not Implemented"
          }
        }
      }
    },
    "/api/v1/media/{media_id}/waveform": {
      "get": {
        "tags": ["Media"],
        "summary": "Get Waveform",
        "description": "Get waveform data for a media file.",
        "operationId": "get_waveform_api_v1_media__media_id__waveform_get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "media_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WaveformResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/api/v1/analysis/media/{media_id}/analyze": {
      "post": {
        "tags": ["Analysis"],
        "summary": "Start Analysis",
        "description": "Start audio analysis for a media file.",
        "operationId": "start_analysis_api_v1_analysis_media__media_id__analyze_post",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "media_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/AnalysisCreate" }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Analysis Started",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AnalysisStartResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "AI Features Disabled"
          },
          "404": {
            "description": "Media Not Found"
          }
        }
      }
    },
    "/api/v1/analysis/{analysis_id}": {
      "get": {
        "tags": ["Analysis"],
        "summary": "Get Analysis",
        "description": "Get analysis result.",
        "operationId": "get_analysis_api_v1_analysis__analysis_id__get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "analysis_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AnalysisResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/api/v1/analysis/{analysis_id}/status": {
      "get": {
        "tags": ["Analysis"],
        "summary": "Get Analysis Status",
        "description": "Get lightweight analysis status for polling.",
        "operationId": "get_analysis_status_api_v1_analysis__analysis_id__status_get",
        "security": [{ "HTTPBearer": [] }],
        "parameters": [
          {
            "name": "analysis_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AnalysisStatusResponse" }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/api/v1/config/features": {
      "get": {
        "tags": ["Configuration"],
        "summary": "Get Features",
        "description": "Get available features and configuration (public endpoint).",
        "operationId": "get_features_api_v1_config_features_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FeaturesResponse" }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "RegisterRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string", "minLength": 8, "maxLength": 128 },
          "full_name": { "type": "string", "maxLength": 255 }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string" }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "required": ["refresh_token"],
        "properties": {
          "refresh_token": { "type": "string" }
        }
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": { "type": "string", "format": "email" }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": ["token", "new_password"],
        "properties": {
          "token": { "type": "string" },
          "new_password": { "type": "string", "minLength": 8, "maxLength": 128 }
        }
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "email": { "type": "string" },
          "full_name": { "type": "string", "nullable": true },
          "is_active": { "type": "boolean" },
          "is_verified": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "last_login": { "type": "string", "format": "date-time", "nullable": true },
          "settings": { "type": "object", "nullable": true }
        }
      },
      "UserUpdate": {
        "type": "object",
        "properties": {
          "full_name": { "type": "string", "maxLength": 255, "nullable": true },
          "settings": { "type": "object", "nullable": true }
        }
      },
      "TokenResponse": {
        "type": "object",
        "properties": {
          "user": { "$ref": "#/components/schemas/UserResponse" },
          "access_token": { "type": "string" },
          "refresh_token": { "type": "string" },
          "token_type": { "type": "string", "default": "bearer" }
        }
      },
      "MessageResponse": {
        "type": "object",
        "properties": {
          "message": { "type": "string" }
        }
      },
      "ProjectStatus": {
        "type": "string",
        "enum": ["created", "processing", "completed", "failed"]
      },
      "ProjectCreate": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": { "type": "string", "minLength": 1, "maxLength": 255 },
          "description": { "type": "string", "maxLength": 1000, "nullable": true }
        }
      },
      "ProjectUpdate": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "minLength": 1, "maxLength": 255, "nullable": true },
          "description": { "type": "string", "maxLength": 1000, "nullable": true }
        }
      },
      "ProjectResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "user_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "description": { "type": "string", "nullable": true },
          "status": { "$ref": "#/components/schemas/ProjectStatus" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" }
        }
      },
      "ProjectWithMediaResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "user_id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "description": { "type": "string", "nullable": true },
          "status": { "$ref": "#/components/schemas/ProjectStatus" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "media_files": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/MediaFileWithAnalysisResponse" }
          }
        }
      },
      "ProjectListResponse": {
        "type": "object",
        "properties": {
          "projects": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ProjectResponse" }
          },
          "pagination": { "$ref": "#/components/schemas/PaginationMeta" }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": { "type": "integer" },
          "limit": { "type": "integer" },
          "total": { "type": "integer" },
          "total_pages": { "type": "integer" }
        }
      },
      "MediaFileResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "project_id": { "type": "string", "format": "uuid" },
          "original_filename": { "type": "string" },
          "stored_filename": { "type": "string" },
          "file_size": { "type": "integer" },
          "mime_type": { "type": "string" },
          "duration_seconds": { "type": "number", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "MediaFileWithAnalysisResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "original_filename": { "type": "string" },
          "file_size": { "type": "integer" },
          "mime_type": { "type": "string" },
          "duration_seconds": { "type": "number", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" },
          "analysis_results": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AnalysisBasicResponse" }
          }
        }
      },
      "AnalysisBasicResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "processing_mode": { "type": "string" },
          "status": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" },
          "completed_at": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "PresignedUploadRequest": {
        "type": "object",
        "required": ["filename", "content_type", "file_size"],
        "properties": {
          "filename": { "type": "string", "minLength": 1, "maxLength": 255 },
          "content_type": { "type": "string" },
          "file_size": { "type": "integer", "minimum": 1 }
        }
      },
      "PresignedUploadResponse": {
        "type": "object",
        "properties": {
          "upload_url": { "type": "string" },
          "file_id": { "type": "string", "format": "uuid" }
        }
      },
      "UploadConfirmResponse": {
        "type": "object",
        "properties": {
          "media_file": { "$ref": "#/components/schemas/MediaFileResponse" }
        }
      },
      "WaveformResponse": {
        "type": "object",
        "properties": {
          "peaks": {
            "type": "array",
            "items": { "type": "number" }
          },
          "duration": { "type": "number" },
          "sample_rate": { "type": "integer" }
        }
      },
      "ProcessingMode": {
        "type": "string",
        "enum": ["vad", "whisper"]
      },
      "AnalysisStatus": {
        "type": "string",
        "enum": ["pending", "processing", "completed", "failed"]
      },
      "AnalysisCreate": {
        "type": "object",
        "properties": {
          "processing_mode": {
            "type": "string",
            "enum": ["vad", "whisper", "auto"],
            "default": "auto"
          },
          "vad_aggressiveness": { "type": "integer", "minimum": 1, "maximum": 3, "nullable": true },
          "min_silence_duration_ms": { "type": "integer", "minimum": 100, "maximum": 5000, "nullable": true },
          "min_speech_duration_ms": { "type": "integer", "minimum": 100, "maximum": 5000, "nullable": true },
          "detect_filler_words": { "type": "boolean", "nullable": true },
          "custom_filler_words": {
            "type": "array",
            "items": { "type": "string" },
            "nullable": true
          }
        }
      },
      "AnalysisStartResponse": {
        "type": "object",
        "properties": {
          "analysis_id": { "type": "string", "format": "uuid" },
          "status": { "$ref": "#/components/schemas/AnalysisStatus" }
        }
      },
      "SegmentResponse": {
        "type": "object",
        "properties": {
          "start_ms": { "type": "integer" },
          "end_ms": { "type": "integer" },
          "type": { "type": "string", "enum": ["speech", "silence", "filler"] },
          "confidence": { "type": "number" },
          "text": { "type": "string", "nullable": true },
          "filler_word": { "type": "string", "nullable": true }
        }
      },
      "FillerWordDetection": {
        "type": "object",
        "properties": {
          "word": { "type": "string" },
          "start_ms": { "type": "integer" },
          "end_ms": { "type": "integer" },
          "confidence": { "type": "number" }
        }
      },
      "AnalysisResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "media_file_id": { "type": "string", "format": "uuid" },
          "processing_mode": { "$ref": "#/components/schemas/ProcessingMode" },
          "status": { "$ref": "#/components/schemas/AnalysisStatus" },
          "segments": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/SegmentResponse" },
            "nullable": true
          },
          "transcription": { "type": "string", "nullable": true },
          "filler_words_detected": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/FillerWordDetection" },
            "nullable": true
          },
          "processing_time_ms": { "type": "integer", "nullable": true },
          "error_message": { "type": "string", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" },
          "completed_at": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "AnalysisStatusResponse": {
        "type": "object",
        "properties": {
          "status": { "$ref": "#/components/schemas/AnalysisStatus" },
          "progress_percent": { "type": "integer", "nullable": true },
          "error_message": { "type": "string", "nullable": true }
        }
      },
      "FeaturesResponse": {
        "type": "object",
        "properties": {
          "filler_detection_available": { "type": "boolean" },
          "max_file_size_mb": { "type": "integer" },
          "allowed_extensions": {
            "type": "array",
            "items": { "type": "string" }
          },
          "default_processing_mode": { "type": "string" }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": { "type": "string" },
              "message": { "type": "string" },
              "details": { "type": "object" }
            }
          }
        }
      },
      "HTTPValidationError": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ValidationError" }
          }
        }
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "loc": {
            "type": "array",
            "items": { "type": "string" }
          },
          "msg": { "type": "string" },
          "type": { "type": "string" }
        }
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
